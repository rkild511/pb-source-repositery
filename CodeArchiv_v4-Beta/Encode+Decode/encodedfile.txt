OyBHZXJtYW4gZm9ydW06IGh0dHA6Ly9yb2JzaXRlLmRlL3BocC9wdXJlYm9hcmQvdmlld3RvcGljLnBocD90PTMzOTkmaGlnaGxpZ2h0PQ0KOyBBdXRob3I6IG1hbm5lDQo7IERhdGU6IDExLiBKYW51YXJ5IDIwMDQNCg0KDQo7IFdlciBtYWwgZWJlbiBhdWYgZGllIHNjaG5lbGxlIGVpbmVuIFRleHQgdmVyc2NobPxzc2VsbiBt9mNodGUsIGZpbmRldCBpbQ0KOyBmb2xnZW5kZW4gQmVpc3BpZWwgZWluZW4gbfZnbGljaGVuIEFuc2F0ei4gDQoNCg0KOy0gRW5jcnlwdGlvbi9EZWNyeXB0aW9uIHBhcnQgLSBjb3VsZCBiZSBzZXBhcmF0ZWQgYXMgSW5jbHVkZSBmaWxlDQpQcm9jZWR1cmUubCBDYWxjdWxhdGVTZWVkKElucHV0TnVtYmVyLmwpIA0KICBQcm9jZWR1cmVSZXR1cm4gSW50KExvZyhJbnB1dE51bWJlcikgKiBDb3MoSW5wdXROdW1iZXIpICogMTM3KSANCkVuZFByb2NlZHVyZSANCg0KUHJvY2VkdXJlLmwgR2V0UGFzc3dvcmRWYWx1ZShQYXNzd29yZC5zKSANCiAgQVNDSUlfVmFscy5sIA0KICANCiAgRm9yIGkgPSAxIFRvIExlbihQYXNzd29yZCkgDQogICAgQVNDSUlfVmFscyA9IEFTQ0lJX1ZhbHMgKyBBc2MoTWlkKFBhc3N3b3JkLCBpLCAxKSkgDQogIE5leHQgaSANCiAgDQogIElmIEFTQ0lJX1ZhbHMgPiBMZW4oUGFzc3dvcmQpIA0KICAgIFByb2NlZHVyZVJldHVybiBJbnQoQ2FsY3VsYXRlU2VlZChBU0NJSV9WYWxzKSAvIENhbGN1bGF0ZVNlZWQoTGVuKFBhc3N3b3JkKSArIDEpKSANCiAgRWxzZSANCiAgICBQcm9jZWR1cmVSZXR1cm4gQ2FsY3VsYXRlU2VlZChBU0NJSV9WYWxzKSANCiAgRW5kSWYgDQpFbmRQcm9jZWR1cmUgDQoNClByb2NlZHVyZS5sIFdyYXBOdW1iZXIobG5nTnVtYmVyLmwsIGxuZ01pbmltdW0ubCwgbG5nTWF4aW11bS5sKSANCiAgRGVmVHlwZS5sIFJhbmdlLCBjaGVjayANCiAgUmFuZ2UgPSBsbmdNYXhpbXVtIC0gbG5nTWluaW11bSANCiAgY2hlY2sgPSBsbmdOdW1iZXIgDQogIA0KICBJZiBsbmdOdW1iZXIgPiBsbmdNYXhpbXVtIA0KICAgIFJlcGVhdCANCiAgICAgIGNoZWNrID0gY2hlY2sgLSBSYW5nZSANCiAgICBVbnRpbCBjaGVjayA8PSBsbmdNYXhpbXVtIA0KICBFbHNlSWYgbG5nTnVtYmVyIDwgbG5nTWluaW11bSANCiAgICBSZXBlYXQgDQogICAgICBjaGVjayA9IGNoZWNrICsgUmFuZ2UgDQogICAgVW50aWwgY2hlY2sgPj0gbG5nTWluaW11bSANCiAgRW5kSWYgDQogIFByb2NlZHVyZVJldHVybiBjaGVjayANCkVuZFByb2NlZHVyZSANCg0KUHJvY2VkdXJlLnMgRW5jcnlwdChQYXNzd29yZC5zLCBJbnB1dC5zKSANCiAgRGVmVHlwZS5sIFBhc3N3b3JkVmFsLCBDdXJyZW50Q2hhciwgQ3VycmVudE1vZCANCiAgZW5jdHh0LnMgIA0KICBQYXNzd29yZFZhbCA9IEdldFBhc3N3b3JkVmFsdWUoUGFzc3dvcmQpIA0KICAgIA0KICBDdXJyZW50TW9kID0gMiANCiAgICANCiAgRm9yIGkgPSAxIFRvIExlbihJbnB1dCkgDQogICAgQ3VycmVudENoYXIgPSBBc2MoTWlkKElucHV0LCBpLCAxKSkgDQogICAgQ3VycmVudENoYXIgPSBDdXJyZW50Q2hhciArIFBhc3N3b3JkVmFsIA0KICAgIEN1cnJlbnRDaGFyID0gQ3VycmVudENoYXIgLSBDYWxjdWxhdGVTZWVkKEN1cnJlbnRNb2QpIA0KICAgIEN1cnJlbnRDaGFyID0gV3JhcE51bWJlcihDdXJyZW50Q2hhciwgMCwgMjU1KSANCiAgICBlbmN0eHQgPSBlbmN0eHQgKyBDaHIoQ3VycmVudENoYXIpIA0KICAgIEN1cnJlbnRNb2QgPSBDdXJyZW50TW9kICsgMSANCiAgICANCiAgICBJZiBDdXJyZW50TW9kID4gMzAgDQogICAgICBDdXJyZW50TW9kID0gMiANCiAgICBFbmRJZiANCiAgTmV4dCBpIA0KICBQcm9jZWR1cmVSZXR1cm4gZW5jdHh0ICANCkVuZFByb2NlZHVyZSANCg0KUHJvY2VkdXJlLnMgRGVjcnlwdChQYXNzd29yZC5zLCBJbnB1dC5zKSANCiAgRGVmVHlwZS5sIFBhc3N3b3JkVmFsLCBDdXJyZW50Q2hhciwgQ3VycmVudE1vZCANCiAgZGVjdHh0LnMgIA0KICBQYXNzd29yZFZhbCA9IEdldFBhc3N3b3JkVmFsdWUoUGFzc3dvcmQpIA0KICBDdXJyZW50TW9kID0gMiANCiAgICANCiAgRm9yIGkgPSAxIFRvIExlbihJbnB1dCkgDQogICAgQ3VycmVudENoYXIgPSBBc2MoTWlkKElucHV0LCBpLCAxKSkgDQogICAgQ3VycmVudENoYXIgPSBDdXJyZW50Q2hhciAtIFBhc3N3b3JkVmFsIA0KICAgIEN1cnJlbnRDaGFyID0gQ3VycmVudENoYXIgKyBDYWxjdWxhdGVTZWVkKEN1cnJlbnRNb2QpIA0KICAgIEN1cnJlbnRDaGFyID0gV3JhcE51bWJlcihDdXJyZW50Q2hhciwgMCwgMjU1KSANCiAgICBkZWN0eHQgPSBkZWN0eHQgKyBDaHIoQ3VycmVudENoYXIpIA0KICAgIEN1cnJlbnRNb2QgPSBDdXJyZW50TW9kICsgMSANCiAgICANCiAgICBJZiBDdXJyZW50TW9kID4gMzAgDQogICAgICBDdXJyZW50TW9kID0gMiANCiAgICBFbmRJZiANCiAgTmV4dCBpIA0KICBQcm9jZWR1cmVSZXR1cm4gZGVjdHh0ICAgIA0KRW5kUHJvY2VkdXJlDQoNCjstIEdVSSBwYXJ0DQpFbnVtZXJhdGlvbiANCiAgI1dpbmRvd18wIA0KRW5kRW51bWVyYXRpb24gDQoNCkVudW1lcmF0aW9uIA0KICAjVGV4dF8wIA0KICAjU3RyaW5nXzAgDQogICNTdHJpbmdfMSANCiAgI1RleHRfMSANCiAgI0J1dHRvbl8wIA0KICAjQnV0dG9uXzEgDQogICNTdHJpbmdfMiANCiAgI1N0YXR1c0Jhcl8wIA0KRW5kRW51bWVyYXRpb24gDQoNCkdsb2JhbCBGb250SUQxIA0KRm9udElEMSA9IExvYWRGb250KDEsICJBcmlhbCIsIDEwLCAjUEJfRm9udF9Cb2xkKSANCkdsb2JhbCBGb250SUQyIA0KRm9udElEMiA9IExvYWRGb250KDIsICJBcmlhbCIsIDgsICNQQl9Gb250X0JvbGQpIA0KDQpQcm9jZWR1cmUgT3Blbl9XaW5kb3dfMCgpIA0KICBJZiBPcGVuV2luZG93KCNXaW5kb3dfMCwgNDMzLCAyMTIsIDMyMiwgMzc2LCAgI1BCX1dpbmRvd19TeXN0ZW1NZW51IHwgI1BCX1dpbmRvd19UaXRsZUJhciB8ICNQQl9XaW5kb3dfU2NyZWVuQ2VudGVyZWQgLCAiVGV4dC1DcnlwdCIpIA0KICAgIElmIENyZWF0ZVN0YXR1c0JhcigjU3RhdHVzQmFyXzAsIFdpbmRvd0lEKCkpIA0KICAgICAgQWRkU3RhdHVzQmFyRmllbGQoMzIyKSANCiAgICBFbmRJZiANCiAgICANCiAgICBJZiBDcmVhdGVHYWRnZXRMaXN0KFdpbmRvd0lEKCkpIA0KICAgICAgVGV4dEdhZGdldCgjVGV4dF8wLCAyMCwgMjAsIDY1LCAyMCwgIlBhc3N3b3J0OiIpIA0KICAgICAgU2V0R2FkZ2V0Rm9udCgjVGV4dF8wLCBGb250SUQyKSANCiAgICAgIFN0cmluZ0dhZGdldCgjU3RyaW5nXzAsIDkwLCAxOCwgMjEwLCAyMCwgIiIsICNQQl9TdHJpbmdfUGFzc3dvcmQpIA0KICAgICAgU2VuZE1lc3NhZ2VfKEdhZGdldElEKCNTdHJpbmdfMCksICNFTV9MSU1JVFRFWFQsIDEwMCwgMCkgDQogICAgICBTdHJpbmdHYWRnZXQoI1N0cmluZ18xLCAyMCwgNzAsIDI4MCwgMTAwLCAiIiwgI1BCX1N0cmluZ19NdWx0aUxpbmV8I0VTX0FVVE9WU0NST0xMfCNXU19WU0NST0xMfCNFU0JfRElTQUJMRV9MRUZUfCNFU0JfRElTQUJMRV9SSUdIVCkgDQogICAgICBTZW5kTWVzc2FnZV8oR2FkZ2V0SUQoI1N0cmluZ18xKSwgI0VNX0xJTUlUVEVYVCwgMTAwMCwgMCkgDQogICAgICBUZXh0R2FkZ2V0KCNUZXh0XzEsIDQ4LCA1MCwgNDUsIDE1LCAiSW5wdXQ6IikgDQogICAgICBCdXR0b25HYWRnZXQoI0J1dHRvbl8wLCAyMCwgMTgwLCAyODAsIDMwLCAiVmVyc2NobPxzc2VsbiIpIA0KICAgICAgQWRkS2V5Ym9hcmRTaG9ydGN1dCgjV2luZG93XzAsICNQQl9TaG9ydGN1dF9Db250cm9sIHwgI1BCX1Nob3J0Y3V0X0UsICNCdXR0b25fMCkgDQogICAgICBTZXRHYWRnZXRGb250KCNCdXR0b25fMCwgRm9udElEMikgDQogICAgICBCdXR0b25HYWRnZXQoI0J1dHRvbl8xLCAyMCwgMjEwLCAyODAsIDMwLCAiRW50c2NobPxzc2VsbiIpIA0KICAgICAgQWRkS2V5Ym9hcmRTaG9ydGN1dCgjV2luZG93XzAsICNQQl9TaG9ydGN1dF9Db250cm9sIHwgI1BCX1Nob3J0Y3V0X0QsICNCdXR0b25fMSkgDQogICAgICBTZXRHYWRnZXRGb250KCNCdXR0b25fMSwgRm9udElEMikgDQogICAgICBTdHJpbmdHYWRnZXQoI1N0cmluZ18yLCAyMCwgMjUwLCAyODAsIDEwMCwgIiIsICNQQl9TdHJpbmdfTXVsdGlMaW5lfCNFU19BVVRPVlNDUk9MTHwjV1NfVlNDUk9MTHwjRVNCX0RJU0FCTEVfTEVGVHwjRVNCX0RJU0FCTEVfUklHSFQpIA0KICAgICAgU2VuZE1lc3NhZ2VfKEdhZGdldElEKCNTdHJpbmdfMiksICNFTV9MSU1JVFRFWFQsIDEwMDAsIDApIA0KICAgIEVuZElmIA0KICBFbmRJZiANCkVuZFByb2NlZHVyZSANCg0KOy0gTWFpbiBQcm9ncmFtOg0KT3Blbl9XaW5kb3dfMCgpIA0KQWN0aXZhdGVHYWRnZXQoI1N0cmluZ18wKSANCkRpc2FibGVHYWRnZXQoI0J1dHRvbl8wLCAxKSANCkRpc2FibGVHYWRnZXQoI0J1dHRvbl8xLCAxKSANCg0KUmVwZWF0IA0KICANCiAgRXZlbnQgPSBXYWl0V2luZG93RXZlbnQoKSANCiAgSWYgRXZlbnQgPSAjUEJfRXZlbnRDbG9zZVdpbmRvdyANCiAgICBRdWl0ID0gMSANCiAgRWxzZUlmIEV2ZW50ID0gI1BCX0V2ZW50X0dhZGdldCBPciBFdmVudCA9ICNQQl9FdmVudF9NZW51IA0KICAgIA0KICAgIFNlbGVjdCBFdmVudEdhZGdldElEKCkgDQogICAgICBDYXNlICNCdXR0b25fMCAgO0VuY3J5cHQgDQogICAgICAgIElmIEdldEdhZGdldFRleHQoI1N0cmluZ18wKSA9ICIiIA0KICAgICAgICAgIE1lc3NhZ2VSZXF1ZXN0ZXIoIkZlaGxlciIsICJLZWluIFBhc3N3b3J0IGFuZ2VnZWJlbiEiLCAjTUJfSUNPTldBUk5JTkcpIA0KICAgICAgICBFbHNlIA0KICAgICAgICAgIFNldEdhZGdldFRleHQoI1N0cmluZ18yLCBFbmNyeXB0KEdldEdhZGdldFRleHQoI1N0cmluZ18wKSwgR2V0R2FkZ2V0VGV4dCgjU3RyaW5nXzEpKSkgDQogICAgICAgICAgSWYgTGVuKEdldEdhZGdldFRleHQoI1N0cmluZ18yKSkgPD4gTGVuKEdldEdhZGdldFRleHQoI1N0cmluZ18xKSkgDQogICAgICAgICAgICBTZXRHYWRnZXRUZXh0KCNTdHJpbmdfMiwgIiIpICANCiAgICAgICAgICAgIFN0YXR1c0JhclRleHQoI1N0YXR1c0Jhcl8wLCAwLCAiTmljaHQgZGFyc3RlbGxiLiBaZWljaGVuIGdlZnVuZGVuLCBiaXR0ZSBhbmRlcmVzIFBXIGJlbnV0emVuLiIpIA0KICAgICAgICAgIEVsc2UgDQogICAgICAgICAgICBTZXRHYWRnZXRUZXh0KCNTdHJpbmdfMSwgIiIpIA0KICAgICAgICAgICAgRGlzYWJsZUdhZGdldCgjQnV0dG9uXzAsIDEpIA0KICAgICAgICAgICAgRGlzYWJsZUdhZGdldCgjQnV0dG9uXzEsIDApIA0KICAgICAgICAgICAgU3RhdHVzQmFyVGV4dCgjU3RhdHVzQmFyXzAsIDAsICJWZXJzY2hs/HNzZWx1bmcgZXJmb2xncmVpY2ghIikgDQogICAgICAgICAgRW5kSWYgDQogICAgICAgIEVuZElmIA0KICAgICAgQ2FzZSAjQnV0dG9uXzEgIDtEZWNyeXB0IA0KICAgICAgICBJZiBHZXRHYWRnZXRUZXh0KCNTdHJpbmdfMCkgPSAiIiANCiAgICAgICAgICBNZXNzYWdlUmVxdWVzdGVyKCJGZWhsZXIiLCAiS2VpbiBQYXNzd29ydCBhbmdlZ2ViZW4hIiwgI01CX0lDT05XQVJOSU5HKSANCiAgICAgICAgRWxzZSANCiAgICAgICAgICBTZXRHYWRnZXRUZXh0KCNTdHJpbmdfMSwgRGVjcnlwdChHZXRHYWRnZXRUZXh0KCNTdHJpbmdfMCksIEdldEdhZGdldFRleHQoI1N0cmluZ18yKSkpIA0KICAgICAgICAgIFNldEdhZGdldFRleHQoI1N0cmluZ18yLCAiIikgDQogICAgICAgICAgRGlzYWJsZUdhZGdldCgjQnV0dG9uXzEsIDEpIA0KICAgICAgICAgIERpc2FibGVHYWRnZXQoI0J1dHRvbl8wLCAwKSANCiAgICAgICAgICBTdGF0dXNCYXJUZXh0KCNTdGF0dXNCYXJfMCwgMCwgIkVudHNjaGz8c3NlbHVuZyBlcmZvbGdyZWljaCEiKSANCiAgICAgICAgRW5kSWYgDQogICAgICBDYXNlICNTdHJpbmdfMSAgOyBJbnB1dCANCiAgICAgICAgSWYgRXZlbnRUeXBlKCkgPSAjUEJfRXZlbnRUeXBlX0NoYW5nZSANCiAgICAgICAgICBEaXNhYmxlR2FkZ2V0KCNCdXR0b25fMCwgMCkgDQogICAgICAgIEVuZElmIA0KICAgICAgQ2FzZSAjU3RyaW5nXzIgIDsgT3V0cHV0IA0KICAgICAgICBJZiBFdmVudFR5cGUoKSA9ICNQQl9FdmVudFR5cGVfQ2hhbmdlIA0KICAgICAgICAgIERpc2FibGVHYWRnZXQoI0J1dHRvbl8xLCAwKSANCiAgICAgICAgRW5kSWYgDQogICAgRW5kU2VsZWN0IA0KICBFbmRJZiANCiAgDQpVbnRpbCBRdWl0IA0KDQpFbmQNCjsgRXhlY3V0YWJsZUZvcm1hdD1XaW5kb3dzDQo7IEZpcnN0TGluZT0xDQo7IEVuYWJsZVhQDQo7IERpc2FibGVEZWJ1Z2dlcg0KOyBFT0Y=